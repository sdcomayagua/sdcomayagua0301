<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin | SDComayagua</title>
  <meta name="robots" content="noindex" />
  <link rel="stylesheet" href="assets/app.css" />
  <script defer src="assets/config.js"></script>
  <script defer src="assets/app.js"></script>
</head>
<body data-page="admin">
  <header class="topbar">
    <div class="container">
      <div class="topbar-inner">
        <a class="brand" href="index.html" aria-label="Volver a tienda">
          <img src="assets/logo.svg" alt="SD-COMAYAGUA" />
          <div class="tagline">Panel Admin</div>
        </a>

        <div class="header-actions">
          <button class="btn" id="themeBtn" type="button" title="Modo d√≠a/noche" aria-label="Modo d√≠a/noche">
            <span class="themeIcon" aria-hidden="true">üåô</span>
          </button>
          <button class="btn primary" id="storeBtn" type="button">üè™ Ver tienda</button>
          <button class="btn" id="logoutBtn" type="button">Salir</button>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="section" id="loginBox">
      <div class="section-title">
        <h2>Ingresar</h2>
        <div class="meta">Us√° tu <b>ADMIN_KEY</b> del Apps Script</div>
      </div>

      <div class="toolbar">
        <input class="input" id="adminKey" type="password" placeholder="Clave ADMIN" autocomplete="current-password" />
        <button class="btn primary" id="loginBtn" type="button">Entrar</button>
      </div>

      <div class="callout">
        <div class="callout-title">Tip</div>
        <div class="small">Si tu web ya estaba funcionando, solo necesit√°s la misma clave que configuraste en el backend premium.</div>
      </div>
    </section>

    <section class="section" id="adminUI" style="display:none">
      <div class="section-title">
        <h2>Productos</h2>
        <div class="meta" id="adminMeta">Cargando‚Ä¶</div>
      </div>

      <div class="toolbar">
        <input class="input" id="aSearch" type="search" placeholder="Buscar producto‚Ä¶" autocomplete="off" />
        <select class="input" id="aFilter">
          <option value="all">Todos</option>
          <option value="active">Activos</option>
          <option value="inactive">Inactivos</option>
          <option value="instock">Con stock</option>
          <option value="out">Sin stock</option>
        </select>
        <button class="btn primary" id="newBtn" type="button">Ôºã Nuevo</button>
      </div>

      <div class="adminLayout">
        <!-- M√≥vil: tarjetas (evita scroll horizontal) -->
        <div id="acards" class="acards"></div>

        <div class="tableWrap">
          <table class="table">
            <thead>
              <tr>
                <th>Producto</th>
                <th>Precio</th>
                <th>Stock</th>
                <th>Estado</th>
                <th style="width:220px">Acciones</th>
              </tr>
            </thead>
            <tbody id="atable"></tbody>
          </table>
        </div>

        <div class="sideHelp">
          <div class="card soft">
            <div class="card-body">
              <div class="small"><b>Atajos</b></div>
              <ul class="small">
                <li><b>Duplicar</b> crea una copia con nuevo ID.</li>
                <li><b>Desactivar</b> oculta el producto sin borrarlo.</li>
                <li><b>Stock</b> controla disponibilidad en la tienda.</li>
              </ul>
              <div class="small" style="opacity:.9">
                Si tu backend premium usa otra estructura de doPost, igual lo intentamos con 2 m√©todos (JSON y form).
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer class="footer">
      ¬© <span id="year"></span> SDComayagua
    </footer>
  </main>

  <!-- Modal editor -->
  <div class="backdrop" id="aModal" aria-hidden="true">
    <div class="modal wide" role="dialog" aria-modal="true" aria-label="Editor de producto">
      <div class="modal-head">
        <div>
          <h3 id="aTitle" style="margin:0">Editar producto</h3>
          <div class="small" id="aSubtitle"></div>
        </div>
        <button class="close" id="aClose" type="button" aria-label="Cerrar">‚úï</button>
      </div>

      <div class="modal-body">
        <div class="tabs">
          <button class="tab active" data-tab="basic" type="button">B√°sico</button>
          <button class="tab" data-tab="media" type="button">Im√°genes</button>
          <button class="tab" data-tab="extra" type="button">Oferta / Video</button>
        </div>

        <form id="aForm" class="form">
          <input type="hidden" name="id" />

          <div class="tabpane active" data-pane="basic">
            <div class="formgrid">
              <label class="field">
                <span>Nombre</span>
                <input class="input" name="nombre" required />
              </label>
              <label class="field">
                <span>Marca</span>
                <input class="input" name="marca" />
              </label>
              <label class="field">
                <span>Categor√≠a</span>
                <input class="input" name="categoria" required />
              </label>
              <label class="field">
                <span>Subcategor√≠a</span>
                <input class="input" name="subcategoria" />
              </label>
              <label class="field">
                <span>Precio (Lps)</span>
                <input class="input" name="precio" inputmode="decimal" />
              </label>
              <label class="field">
                <span>Stock</span>
                <input class="input" name="stock" inputmode="numeric" required />
              </label>
              <label class="field row">
                <span>Activo</span>
                <select class="input" name="activo">
                  <option value="1">S√≠</option>
                  <option value="0">No</option>
                </select>
              </label>

              <label class="field span2">
                <span>Descripci√≥n</span>
                <textarea class="input" name="descripcion" rows="5" placeholder="Descripci√≥n del producto‚Ä¶"></textarea>
              </label>
            </div>
          </div>

          <div class="tabpane" data-pane="media">
            <div class="formgrid">
              <label class="field span2">
                <span>Imagen principal (URL)</span>
                <input class="input" name="img" placeholder="https://..." />
              </label>
              <div class="span2 small">Galer√≠a (hasta 8 URLs). Si no us√°s alguna, dejala vac√≠a.</div>

              <label class="field"><span>Galer√≠a 1</span><input class="input" name="galeria_1" placeholder="https://..." /></label>
              <label class="field"><span>Galer√≠a 2</span><input class="input" name="galeria_2" placeholder="https://..." /></label>
              <label class="field"><span>Galer√≠a 3</span><input class="input" name="galeria_3" placeholder="https://..." /></label>
              <label class="field"><span>Galer√≠a 4</span><input class="input" name="galeria_4" placeholder="https://..." /></label>
              <label class="field"><span>Galer√≠a 5</span><input class="input" name="galeria_5" placeholder="https://..." /></label>
              <label class="field"><span>Galer√≠a 6</span><input class="input" name="galeria_6" placeholder="https://..." /></label>
              <label class="field"><span>Galer√≠a 7</span><input class="input" name="galeria_7" placeholder="https://..." /></label>
              <label class="field"><span>Galer√≠a 8</span><input class="input" name="galeria_8" placeholder="https://..." /></label>
            </div>
          </div>

          <div class="tabpane" data-pane="extra">
            <div class="formgrid">
              <label class="field span2">
                <span>Video URL (TikTok / YouTube / etc.)</span>
                <input class="input" name="video_url" placeholder="https://..." />
              </label>
              <label class="field span2">
                <span>ofertas_json</span>
                <textarea class="input mono" name="ofertas_json" rows="6" placeholder='Ejemplo: {"badge":"OFERTA","percent":15} o {"precio_oferta":150}'></textarea>
                <div class="small">Se muestra badge y precio rebajado autom√°ticamente si tiene <b>percent</b> o <b>precio_oferta</b>.</div>
              </label>
            </div>
          </div>

          <div class="formrow" style="margin-top:14px">
            <button class="btn primary" id="saveBtn" type="submit">Guardar</button>
            <button class="btn" id="dupBtn" type="button">Duplicar</button>
            <button class="btn danger" id="deactBtn" type="button">Desactivar</button>
            <div class="spacer"></div>
            <button class="btn ghost" id="cancelBtn" type="button">Cancelar</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
